<script src="https://www.google.com/recaptcha/api.js?render=6Lef4iErAAAAAAwEFGcKgJGKPFnr4GOFWCzKqSPf"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.7-beta.19/jquery.inputmask.min.js"></script>

<form action="/users/new" method="post"
      class="w-120 p-6 rounded-2xl bg-slate-300 dark:bg-slate-800">
  <h1 class="text-center w-full mb-4 text-3xl font-bold text-gray-500">Cadastro</h1>

  <input type="text"   name="name"  placeholder="Nome"
         class="w-full p-2 rounded-lg mb-2 bg-slate-400 dark:bg-slate-900" required>

  <input type="email"  name="email" placeholder="Email"
         class="w-full p-2 rounded-lg mb-2 bg-slate-400 dark:bg-slate-900" required>

  <input type="text"   id="cpf" name="CPF" placeholder="CPF"
         pattern="\d{3}\.\d{3}\.\d{3}-\d{2}"
         class="w-full p-2 rounded-lg mb-2 bg-slate-400 dark:bg-slate-900" required>

  <input type="password" name="password" placeholder="Senha"
         class="w-full p-2 rounded-lg mb-4 bg-slate-400 dark:bg-slate-900" required>

  <input type="hidden" id="g-recaptcha-token" name="g-recaptcha-token">

  <button type="submit"
          class="block mx-auto rounded-2xl h-8 w-18 bg-green-500 hover:bg-zinc-700">
    Submit
  </button>
</form>

<script>
  $(document).ready(() => {
    $('#cpf').inputmask('999.999.999-99');
  });

  document.addEventListener('DOMContentLoaded', () => {
    grecaptcha.ready(() => {
      grecaptcha.execute('6Lef4iErAAAAAAwEFGcKgJGKPFnr4GOFWCzKqSPf', { action: 'signup' })
        .then(token => {
          document.getElementById('g-recaptcha-token').value = token;
        });
    });
  });
</script>
